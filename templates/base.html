<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin-home.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin-users.css') }}">
</head>
<body>
    <section class="nav py-3">
        <div class="nav-in d-flex align-items-center justify-content-between">
            <button class="btn btn-light sidebar-btn p-0" onclick="appearSidebar()">
                <!-- <i class="fa-solid fa-arrow-right-from-bracket"></i> -->
                <img src="{{ url_for('static', filename='images/sidebar.png') }}" alt="">
            </button>
            <div class="d-flex mt-1">
                <i class="fa-solid fa-user pt-1"></i>
                <h5 class="mb-0 ml-2">{{ full_name }}</h5>
            </div>
        </div>
    </section>

    <div id="sidebar" class="sidebar">
        <h2>Sidebar</h2>
        <ul class="mt-3">
            <li><i class="fa-solid fa-house"></i><a class="ml-3" href="{{ url_for('admin_page') }}">Home</a></li>
            <li><i class="fa-solid fa-user"></i><a class="ml-3" href="{{ url_for('admin_users_page') }}">Users</a></li>
            <li><i class="fa-solid fa-users"></i><a class="ml-3" href="{{ url_for('admin_roles_page') }}">Roles</a></li>
            {% if role == 'admin' %}
                <li><i class="fa-solid fa-rectangle-list"></i><a class="ml-3" href="{{ url_for('admin_todos_page')}}">Todos</a></li>
            {% endif %}
            <li onclick="toggleCollapse(this)" class="toggler"><i class="fas fa-chevron-right arrow"></i><span class="ml-3">Permissions</span></li>
            <ul class="submenu">
                <li><i class="fa-solid fa-lock"></i><a class="ml-3" href="{{ url_for('admin_permissions_page') }}">Permission Crud</a></li>
                <li><i class="fa-solid fa-user-lock"></i><a class="ml-3" href="{{ url_for('admin_user_permissions_page') }}">User Permissions</a></li>
                <li><i class="fa-solid fa-user-gear"></i><a class="ml-3" href="{{ url_for('admin_role_permissions_page') }}">Role Permissions</a></li>
            </ul>
            <li onclick="toggleCollapse(this)" class="toggler"><i class="fa-solid fa-chevron-right arrow"></i><span class="ml-3">Projects</span></li>
            <ul class="submenu">
                <li><i class="fa-solid fa-layer-group"></i><a class="ml-3" href="{{ url_for('admin_projects_page') }}">Project crud</a></li>
                <li><i class="fa-solid fa-circle-check"></i><a class="ml-3" href="{{ url_for('admin_project_columns_page') }}">Project-Column</a></li>
            </ul>
            {% if role != 'admin' %}
                <li onclick="toggleCollapse(this)" class="toggler"><i class="fa-solid fa-chevron-right arrow"></i><span class="ml-3">My todos</span></li>
                <ul class="submenu">
                    <li><i class="fa-solid fa-clipboard-user"></i><a class="ml-3" href="{{ url_for('my_user_todos_page') }}">User Todos</a></li>
                    <li><i class="fa-solid fa-folder-open"></i><a class="ml-3" href="{{ url_for('my_project_todos_page') }}">Project Todos</a></li>
                </ul>
            {% endif %}
            <li><i class="fa-solid fa-right-from-bracket"></i><a class="ml-3" href="{{ url_for('logout_page') }}">Logout</a></li>
        </ul>
        <button class="position-absolute btn btn-dark py-1 px-2" onclick="disappearSidebar()"><i class="fa-solid fa-xmark"></i></button>
    </div>
    {% block content %}{% endblock %}
</body>
<script>
    function appearSidebar() {
        console.log("heree");
        
        const sidebar = document.getElementById("sidebar");
        sidebar.classList.add("open");
    }
    function disappearSidebar() {
        const sidebar = document.getElementById("sidebar");
        sidebar.classList.remove("open");
    }
    function toggleCollapse(el) {
        const arrow = el.querySelector('.arrow');
        const submenu = el.nextElementSibling;

        submenu.classList.toggle('show');
        arrow.classList.toggle('rotate');
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>
<script src="https://kit.fontawesome.com/6125e90fa6.js" crossorigin="anonymous"></script>
</html>